<!DOCTYPE html><html lang="en-US" prefix="og: https://ogp.me/ns#"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="shortcut icon" href="https://developer.mozilla.org/favicon.ico"><link rel="alternate icon" type="image/svg+xml" href="https://developer.mozilla.org/favicon.svg"><link rel="apple-touch-icon" href="https://developer.mozilla.org/apple-touch-icon.528534bba673c38049c2.png"><meta name="theme-color" content="#ffffff"><link rel="manifest" href="https://developer.mozilla.org/manifest.f42880861b394dd4dc9b.json"><link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="MDN Web Docs"><title>Attribution-Reporting-Register-Source header</title><link rel="alternate" title="Attribution-Reporting-Register-Source header" href="https://developer.mozilla.org/de/docs/Web/HTTP/Reference/Headers/Attribution-Reporting-Register-Source" hreflang="de"><link rel="alternate" title="Attribution-Reporting-Register-Source header" href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Reference/Headers/Attribution-Reporting-Register-Source" hreflang="en"><link rel="preload" as="font" type="font/woff2" href="/static/media/Inter.var.c2fe3cb2b7c746f7966a.woff2" crossorigin=""><link rel="alternate" type="application/rss+xml" title="MDN Blog RSS Feed" href="https://developer.mozilla.org/en-US/blog/rss.xml"><meta name="description" content="The HTTP Attribution-Reporting-Register-Source response header registers a page feature as an attribution source. This header is included as part of a response to a request that contains the Attribution-Reporting-Eligible header. It provides the information that the browser should store when a user interacts with the attribution source. The information you include in this header also determines the types of reports the browser can generate."><meta property="og:url" content="https://developer.mozilla.org/en-US/docs/Web/HTTP/Reference/Headers/Attribution-Reporting-Register-Source"><meta property="og:title" content="Attribution-Reporting-Register-Source header - HTTP | MDN"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:description" content="The HTTP Attribution-Reporting-Register-Source response header registers a page feature as an attribution source. This header is included as part of a response to a request that contains the Attribution-Reporting-Eligible header. It provides the information that the browser should store when a user interacts with the attribution source. The information you include in this header also determines the types of reports the browser can generate."><meta property="og:image" content="https://developer.mozilla.org/mdn-social-share.d893525a4fb5fb1f67a2.png"><meta property="og:image:type" content="image/png"><meta property="og:image:height" content="1080"><meta property="og:image:width" content="1920"><meta property="og:image:alt" content="The MDN Web Docs logo, featuring a blue accent color, displayed on a solid black background."><meta property="og:site_name" content="MDN Web Docs"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:creator" content="MozDevNet"><link rel="canonical" href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Reference/Headers/Attribution-Reporting-Register-Source"><style media="print">.article-actions-container,.document-toc-container,.language-menu,.main-menu-toggle,.on-github,.page-footer,.place,.sidebar,.top-banner,.top-navigation-main,ul.prev-next{display:none!important}.main-page-content,.main-page-content pre{padding:2px}.main-page-content pre{border-left-width:2px}</style></head><body><div id="root"><div class="page-wrapper  category-http document-page"><div class="main-wrapper"><main id="content" class="main-content  "><article class="main-page-content" lang="en-US"><header><h1>Attribution-Reporting-Register-Source header</h1><details class="baseline-indicator not"><summary><span class="indicator" role="img" aria-label="Baseline Cross"></span><div class="status-title"><span class="not-bold">Limited availability</span></div><div class="browsers"><span class="engine" title="Supported in Chrome and Edge"><span class="browser chrome supported" role="img" aria-label="Chrome check"></span><span class="browser edge supported" role="img" aria-label="Edge check"></span></span><span class="engine" title="Not widely supported in Firefox"><span class="browser firefox " role="img" aria-label="Firefox cross"></span></span><span class="engine" title="Not widely supported in Safari"><span class="browser safari " role="img" aria-label="Safari cross"></span></span></div><span class="icon icon-chevron "></span></summary><div class="extra"><p>This feature is not Baseline because it does not work in some of the most widely-used browsers.</p><ul><li><a href="https://developer.mozilla.org/en-US/docs/Glossary/Baseline/Compatibility" data-glean="baseline_link_learn_more" target="_blank" class="learn-more">Learn more</a></li><li><a href="#browser_compatibility" data-glean="baseline_link_bcd_table">See full compatibility</a></li><li><a href="https://survey.alchemer.com/s3/7634825/MDN-baseline-feedback?page=%2Fen-US%2Fdocs%2FWeb%2FHTTP%2FReference%2FHeaders%2FAttribution-Reporting-Register-Source&amp;level=not" data-glean="baseline_link_feedback" class="feedback-link" target="_blank" rel="noreferrer">Report feedback</a></li></ul></div></details></header><div class="section-content"><div class="notecard experimental"><p><strong>Experimental:</strong> <strong>This is an <a href="https://developer.mozilla.org/en-US/docs/MDN/Writing_guidelines/Experimental_deprecated_obsolete#experimental">experimental technology</a></strong><br>Check the <a href="#browser_compatibility">Browser compatibility table</a> carefully before using this in production.</p></div>
<p>The HTTP <strong><code>Attribution-Reporting-Register-Source</code></strong> <a href="https://developer.mozilla.org/en-US/docs/Glossary/Response_header">response header</a> registers a page feature as an <a href="https://developer.mozilla.org/en-US/docs/Web/API/Attribution_Reporting_API/Registering_sources">attribution source</a>. This header is included as part of a response to a request that contains the <a href="Attribution-Reporting-Eligible.htm"><code>Attribution-Reporting-Eligible</code></a> header. It provides the information that the browser should store when a user interacts with the attribution source. The information you include in this header also determines the types of reports the browser can generate.</p>
<p>See the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Attribution_Reporting_API">Attribution Reporting API</a> for more details.</p>
<div class="notecard note">
<p><strong>Note:</strong>
If the calling site does not have the Attribution Reporting API included in a successful <a href="https://developer.mozilla.org/en-US/docs/Web/Privacy/Guides/Privacy_sandbox/Enrollment">privacy sandbox enrollment process</a>, the <code>Attribution-Reporting-Register-Source</code> header is ignored and attribution sources are not registered.</p>
</div>
<figure class="table-container"><table class="properties">
  <tbody>
    <tr>
      <th scope="row">Header type</th>
      <td><a href="https://developer.mozilla.org/en-US/docs/Glossary/Response_header">Response header</a></td>
    </tr>
    <tr>
      <th scope="row"><a href="https://developer.mozilla.org/en-US/docs/Glossary/Forbidden_request_header">Forbidden request header</a></th>
      <td>No</td>
    </tr>
    <tr>
      <th scope="row">
        <a href="https://developer.mozilla.org/en-US/docs/Glossary/CORS-safelisted_response_header">CORS-safelisted response header</a>
      </th>
      <td>No</td>
    </tr>
  </tbody>
</table></figure></div><section aria-labelledby="syntax"><h2 id="syntax"><a href="#syntax">Syntax</a></h2><div class="section-content"><div class="code-example"><div class="example-header"><span class="language-name">http</span></div><pre class="brush: http notranslate"><code>Attribution-Reporting-Register-Source: &lt;json-string&gt;
</code></pre></div></div></section><section aria-labelledby="directives"><h2 id="directives"><a href="#directives">Directives</a></h2><div class="section-content"><dl>
<dt id="json-string"><a href="#json-string"><code>&lt;json-string&gt;</code></a></dt>
<dd>
<p>A JSON string providing the information that the browser should store when the attribution source is interacted with. Available fields are as follows:</p>
<dl>
<dt id="source_event_id"><a href="#source_event_id"><code>"source_event_id"</code> <span class="badge inline optional">Optional</span></a></dt>
<dd>
<p>A string representing an ID for the attribution source, which can be used to map it to other information when the attribution source is interacted with, or aggregate information at the reporting endpoint. The string must consist solely of a base-10-formatted 64-bit unsigned integer.</p>
</dd>
<dt id="destination"><a href="#destination"><code>"destination"</code></a></dt>
<dd>
<p>A single string or an array of 1â€“3 strings. These strings must contain a complete URL corresponding to the site (scheme + <a href="https://developer.mozilla.org/en-US/docs/Glossary/eTLD">eTLD+1</a>) on which a trigger is expected to occur. These are used to match the attribution trigger to the source when a trigger is interacted with.</p>
</dd>
<dt id="aggregation_keys"><a href="#aggregation_keys"><code>"aggregation_keys"</code> <span class="badge inline optional">Optional</span></a></dt>
<dd>
<p>An object containing user-provided keys representing different data points to aggregate report values under.</p>
</dd>
<dt id="aggregatable_report_window"><a href="#aggregatable_report_window"><code>"aggregatable_report_window"</code> <span class="badge inline optional">Optional</span></a></dt>
<dd>
<p>A string representing a time in seconds after which trigger data will no longer be included in generated aggregatable reports (this is called a <strong>report window</strong>). If not set, this defaults to the <code>"expiry"</code> value.</p>
</dd>
<dt id="debug_key"><a href="#debug_key"><code>"debug_key"</code> <span class="badge inline optional">Optional</span></a></dt>
<dd>
<p>A base-10-formatted 64-bit unsigned integer representing a debug key. Set this if you want to generate a <a href="https://developer.mozilla.org/en-US/docs/Web/API/Attribution_Reporting_API/Generating_reports#debug_reports">debug report</a> alongside the associated attribution report.</p>
</dd>
<dt id="debug_reporting"><a href="#debug_reporting"><code>"debug_reporting"</code> <span class="badge inline optional">Optional</span></a></dt>
<dd>
<p>A boolean value. If a <code>debug_key</code> is set, set this to <code>true</code> to specify that the generated debug report should be a verbose debug report.</p>
</dd>
<dt id="event_level_epsilon"><a href="#event_level_epsilon"><code>"event_level_epsilon"</code> <span class="badge inline optional">Optional</span></a></dt>
<dd>
<p>A number equal to or greater than <code>0</code>, which controls the amount of <a href="https://developer.mozilla.org/en-US/docs/Web/API/Attribution_Reporting_API/Generating_reports#adding_noise_to_reports">noise added to reports</a>. Lower values of epsilon result in more noise and therefore provide greater privacy protection. The maximum and default values will vary across implementations; Chrome for example has a maximum and default value of <code>14</code>.</p>
</dd>
<dt id="event_report_window"><a href="#event_report_window"><code>"event_report_window"</code> <span class="badge inline optional">Optional</span></a></dt>
<dd>
<p>A string representing a time in seconds, after which subsequent triggers won't be attributable to this source for the purpose of producing event-level reports (this is called a <strong>report window</strong>). If not set, the event report window falls back to the <code>"expiry"</code> value.</p>
<div class="notecard note">
<p><strong>Note:</strong>
If <code>"event_report_window"</code> is specified, <code>"event_report_windows"</code> cannot be specified, otherwise the source registration will fail.</p>
</div>
</dd>
<dt id="event_report_windows"><a href="#event_report_windows"><code>"event_report_windows"</code> <span class="badge inline optional">Optional</span></a></dt>
<dd>
<p>An object representing a series of report windows, starting at <code>"start_time"</code>, with reports for this source being delivered after each specified end time in <code>"end_times"</code>. This can be used to vary the time of report delivery across multiple reports. If not set, the event report window falls back to the <code>"expiry"</code> value. Properties are as follows:</p>
<ul>
<li><code>"start_time"</code> <span class="badge inline optional">Optional</span>: A non-negative number specifying the start time for the reporting windows. If not specified, it defaults to <code>0</code>.</li>
<li><code>"end_times"</code>: An array of positive numbers specifying end times for subsequent report windows. The values must be increasing, and greater than <code>"start_time"</code>.
<div class="notecard note">
<p><strong>Note:</strong>
If <code>"event_report_windows"</code> is specified, <code>"event_report_window"</code> cannot be specified, otherwise the source registration will fail.</p>
</div>
</li>
</ul>
</dd>
<dt id="expiry"><a href="#expiry"><code>"expiry"</code> <span class="badge inline optional">Optional</span></a></dt>
<dd>
<p>A string representing an expiry time in seconds for the attribution source, after which it will no longer be active (i.e., subsequent triggers won't be attributable to this source). The maximum allowable expiry time is 2592000 seconds (30 days), which is also the default value if <code>"expiry"</code> is not explicitly set.</p>
</dd>
<dt id="filter_data"><a href="#filter_data"><code>"filter_data"</code> <span class="badge inline optional">Optional</span></a></dt>
<dd>
<p>An object defining custom data that can be used to filter which conversions generate reports. See <a href="https://developer.mozilla.org/en-US/docs/Web/API/Attribution_Reporting_API/Generating_reports#filters">Filters</a> for more details.</p>
</dd>
<dt id="max_event_level_reports"><a href="#max_event_level_reports"><code>"max_event_level_reports"</code> <span class="badge inline optional">Optional</span></a></dt>
<dd>
<p>A number between <code>0</code> and <code>20</code>, inclusive, which specifies the total number of event-level reports this source can generate. After this maximum is reached, the source is no longer capable of producing any new data. If not specified, <code>"max_event_level_reports"</code> defaults to <code>3</code> for navigation-based sources and <code>1</code> for event-based (image- or script-based) sources.</p>
</dd>
<dt id="priority"><a href="#priority"><code>"priority"</code> <span class="badge inline optional">Optional</span></a></dt>
<dd>
<p>A string representing a priority value for the attribution source. By default, conversions are attributed to the most recent matching source. For both event-level and summary reports you set a higher priority number to prioritize specific sources. For example, a value of <code>2</code> takes priority over the default value of <code>1</code>. See <a href="https://developer.mozilla.org/en-US/docs/Web/API/Attribution_Reporting_API/Generating_reports#report_priorities_and_limits">Report priorities and limits</a> for more information.</p>
</dd>
<dt id="trigger_data"><a href="#trigger_data"><code>"trigger_data"</code> <span class="badge inline optional">Optional</span></a></dt>
<dd>
<p>An array of 32-bit unsigned integers representing data that describes the different trigger events that could match this source. For example, "user added item to shopping cart" or "user signed up to mailing list" could be actions happening at the trigger site that could match this source and indicate a conversion of some kind that the advertiser is trying to measure. These must be matched against <code>"trigger_data"</code> specified in <a href="Attribution-Reporting-Register-Trigger.htm#trigger_data">triggers</a> for event-level attribution to take place. If omitted, <code>"trigger_data"</code> defaults to <code>[0, 1, 2, 3, 4, 5, 6, 7]</code> for navigation-based sources and <code>[0, 1]</code> for event-based (image- or script-based) sources.</p>
<div class="notecard note">
<p><strong>Note:</strong>
The values used to represent each event, and the number of elements in the array, are completely arbitrary and defined by you as the developer. The array may contain values that are not used, but values must be present in the array to be attributed to the source by the browser when a trigger is registered.</p>
</div>
</dd>
<dt id="trigger_data_matching"><a href="#trigger_data_matching"><code>"trigger_data_matching"</code> <span class="badge inline optional">Optional</span></a></dt>
<dd>
<p>A string that specifies how the <code>"trigger_data"</code> from the trigger is matched against the source's <code>"trigger_data"</code>. Possible values are:</p>
<ul>
<li><code>"exact"</code>: The <code>"trigger_data"</code> from the trigger must exactly match a value contained in the source's <code>"trigger_data"</code>; if there is no such match, no event-level attribution takes place.</li>
<li><code>"modulus"</code>: In this case, the following calculation is performed â€” <code>d % allowedValues.size</code> â€” where <code>d</code> is the <code>"trigger_data"</code> from the trigger, and <code>allowedValues</code> is the sequence of values in the source's <code>"trigger_data"</code> array. If the result of this calculation matches a value in the source's <code>"trigger_data"</code> array, the match is a success. In such a case, the value will always match, unless <code>allowedValues</code> is empty.</li>
</ul>
<p><code>"modulus"</code> mode exists primarily for backwards compatibility with the API's behavior before <code>"exact"</code> was introduced, and as such, you'd be unlikely to use it. It is still useful in particular cases that require a very specific kind of compression resulting in smaller registration headers. This can be required when using complex filtering logic that needs to set different trigger data based on the source type according to the maximum number of source <code>"trigger_data"</code> items.</p>
<div class="notecard note">
<p><strong>Note:</strong>
If <code>"modulus"</code> is used, the source's <code>"trigger_data"</code> must form a contiguous sequence of integers starting at 0. If the trigger data does not form such a sequence, an error occurs.</p>
</div>
<p>If not specified, <code>"trigger_data_matching"</code> defaults to <code>"modulus"</code>. Again, the reason for this is backwards compatibility: omitting the <code>"trigger_data_matching"</code> field needs to result in the same behavior observed before this field was introduced.</p>
</dd>
</dl>
</dd>
</dl></div></section><section aria-labelledby="examples"><h2 id="examples"><a href="#examples">Examples</a></h2><div class="section-content"></div></section><section aria-labelledby="registering_a_source_for_an_event-level_report"><h3 id="registering_a_source_for_an_event-level_report"><a href="#registering_a_source_for_an_event-level_report">Registering a source for an event-level report</a></h3><div class="section-content"><p>A Node.js server might set the <code>Attribution-Reporting-Register-Source</code> response header as follows to make a browser generate an event-level report when a trigger is matched to a source:</p>
<div class="code-example"><div class="example-header"><span class="language-name">js</span></div><pre class="brush: js notranslate"><code>res.set(
  "Attribution-Reporting-Register-Source",
  JSON.stringify({
    source_event_id: "412444888111012",
    destination: "https://shop.example",
    trigger_data: [0, 1, 2, 3, 4],
    trigger_data_matching: "exact",
    expiry: "604800",
    priority: "100",
    debug_key: "122939999",
    event_report_window: "86400",
  }),
);
</code></pre></div></div></section><section aria-labelledby="registering_a_source_for_a_summary_report"><h3 id="registering_a_source_for_a_summary_report"><a href="#registering_a_source_for_a_summary_report">Registering a source for a summary report</a></h3><div class="section-content"><p>To make the browser generate a summary report when a trigger is matched to a source, you need to include some extra fields, <em>in addition</em> to those required for event-level report generation.</p>
<div class="code-example"><div class="example-header"><span class="language-name">js</span></div><pre class="brush: js notranslate"><code>res.set(
  "Attribution-Reporting-Register-Source",
  JSON.stringify({
    source_event_id: "412444888111012",
    destination: "https://shop.example",
    trigger_data: [0, 1, 2, 3, 4],
    trigger_data_matching: "exact",
    expiry: "604800",
    priority: "100",
    debug_key: "122939999",
    event_report_window: "86400",

    aggregation_keys: {
      campaignCounts: "0x159",
      geoValue: "0x5",
    },
    aggregatable_report_window: "86400",
  }),
);
</code></pre></div></div></section><h2 id="specifications"><a href="#specifications">Specifications</a></h2><table class="standard-table"><thead><tr><th scope="col">Specification</th></tr></thead><tbody><tr><td><a href="https://wicg.github.io/attribution-reporting-api/#parse-source-registration-json">Attribution Reporting<!-- --> <br><small># <!-- -->parse-source-registration-json</small></a></td></tr></tbody></table><!--$--><h2 id="browser_compatibility"><a href="#browser_compatibility">Browser compatibility</a></h2><lazy-compat-table></lazy-compat-table><!--/$--><section aria-labelledby="see_also"><h2 id="see_also"><a href="#see_also">See also</a></h2><div class="section-content"><ul>
<li><a href="Attribution-Reporting-Eligible.htm"><code>Attribution-Reporting-Eligible</code></a></li>
<li><a href="Attribution-Reporting-Register-Trigger.htm"><code>Attribution-Reporting-Register-Trigger</code></a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Attribution_Reporting_API">Attribution Reporting API</a></li>
</ul></div></section></article></main></div></div></div></body></html>