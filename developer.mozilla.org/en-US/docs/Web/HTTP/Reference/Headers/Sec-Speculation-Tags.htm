<!DOCTYPE html><html lang="en-US" prefix="og: https://ogp.me/ns#"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="shortcut icon" href="https://developer.mozilla.org/favicon.ico"><link rel="alternate icon" type="image/svg+xml" href="https://developer.mozilla.org/favicon.svg"><link rel="apple-touch-icon" href="https://developer.mozilla.org/apple-touch-icon.528534bba673c38049c2.png"><meta name="theme-color" content="#ffffff"><link rel="manifest" href="https://developer.mozilla.org/manifest.f42880861b394dd4dc9b.json"><link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="MDN Web Docs"><title>Sec-Speculation-Tags header</title><link rel="alternate" title="Sec-Speculation-Tags header" href="https://developer.mozilla.org/de/docs/Web/HTTP/Reference/Headers/Sec-Speculation-Tags" hreflang="de"><link rel="alternate" title="Sec-Speculation-Tags header" href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Reference/Headers/Sec-Speculation-Tags" hreflang="en"><link rel="preload" as="font" type="font/woff2" href="/static/media/Inter.var.c2fe3cb2b7c746f7966a.woff2" crossorigin=""><link rel="alternate" type="application/rss+xml" title="MDN Blog RSS Feed" href="https://developer.mozilla.org/en-US/blog/rss.xml"><meta name="description" content="The HTTP Sec-Speculation-Tags request header contains one or more tag values from the speculation rules that resulted in the speculation. This allows a server to identify which rule(s) caused a speculation and potentially block them."><meta property="og:url" content="https://developer.mozilla.org/en-US/docs/Web/HTTP/Reference/Headers/Sec-Speculation-Tags"><meta property="og:title" content="Sec-Speculation-Tags header - HTTP | MDN"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:description" content="The HTTP Sec-Speculation-Tags request header contains one or more tag values from the speculation rules that resulted in the speculation. This allows a server to identify which rule(s) caused a speculation and potentially block them."><meta property="og:image" content="https://developer.mozilla.org/mdn-social-share.d893525a4fb5fb1f67a2.png"><meta property="og:image:type" content="image/png"><meta property="og:image:height" content="1080"><meta property="og:image:width" content="1920"><meta property="og:image:alt" content="The MDN Web Docs logo, featuring a blue accent color, displayed on a solid black background."><meta property="og:site_name" content="MDN Web Docs"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:creator" content="MozDevNet"><link rel="canonical" href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Reference/Headers/Sec-Speculation-Tags"><style media="print">.article-actions-container,.document-toc-container,.language-menu,.main-menu-toggle,.on-github,.page-footer,.place,.sidebar,.top-banner,.top-navigation-main,ul.prev-next{display:none!important}.main-page-content,.main-page-content pre{padding:2px}.main-page-content pre{border-left-width:2px}</style></head><body><div id="root"><div class="page-wrapper  category-http document-page"><div class="main-wrapper"><main id="content" class="main-content  "><article class="main-page-content" lang="en-US"><header><h1>Sec-Speculation-Tags header</h1><details class="baseline-indicator not"><summary><span class="indicator" role="img" aria-label="Baseline Cross"></span><div class="status-title"><span class="not-bold">Limited availability</span></div><div class="browsers"><span class="engine" title="Supported in Chrome and Edge"><span class="browser chrome supported" role="img" aria-label="Chrome check"></span><span class="browser edge supported" role="img" aria-label="Edge check"></span></span><span class="engine" title="Not widely supported in Firefox"><span class="browser firefox " role="img" aria-label="Firefox cross"></span></span><span class="engine" title="Not widely supported in Safari"><span class="browser safari " role="img" aria-label="Safari cross"></span></span></div><span class="icon icon-chevron "></span></summary><div class="extra"><p>This feature is not Baseline because it does not work in some of the most widely-used browsers.</p><ul><li><a href="https://developer.mozilla.org/en-US/docs/Glossary/Baseline/Compatibility" data-glean="baseline_link_learn_more" target="_blank" class="learn-more">Learn more</a></li><li><a href="#browser_compatibility" data-glean="baseline_link_bcd_table">See full compatibility</a></li><li><a href="https://survey.alchemer.com/s3/7634825/MDN-baseline-feedback?page=%2Fen-US%2Fdocs%2FWeb%2FHTTP%2FReference%2FHeaders%2FSec-Speculation-Tags&amp;level=not" data-glean="baseline_link_feedback" class="feedback-link" target="_blank" rel="noreferrer">Report feedback</a></li></ul></div></details></header><div class="section-content"><div class="notecard experimental"><p><strong>Experimental:</strong> <strong>This is an <a href="https://developer.mozilla.org/en-US/docs/MDN/Writing_guidelines/Experimental_deprecated_obsolete#experimental">experimental technology</a></strong><br>Check the <a href="#browser_compatibility">Browser compatibility table</a> carefully before using this in production.</p></div>
<p>The HTTP <strong><code>Sec-Speculation-Tags</code></strong> <a href="https://developer.mozilla.org/en-US/docs/Glossary/Request_header">request header</a> contains one or more <code>tag</code> values from the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Speculation_Rules_API">speculation rules</a> that resulted in the speculation. This allows a server to identify which rule(s) caused a speculation and potentially block them.</p>
<p>For example, a CDN may automatically insert speculation rules, but block speculations for resources not cached in the CDN to avoid unintended consequences. The <code>Sec-Speculation-Tags</code> header allows the CDN to differentiate between the rules it has inserted (which should be blocked in this case) and speculation rules added by the site owner (which should not be blocked).</p>
<figure class="table-container"><table class="properties">
  <tbody>
    <tr>
      <th scope="row">Header type</th>
      <td><a href="https://developer.mozilla.org/en-US/docs/Glossary/Request_header">Request header</a></td>
    </tr>
    <tr>
      <th scope="row"><a href="https://developer.mozilla.org/en-US/docs/Glossary/Forbidden_request_header">Forbidden request header</a></th>
      <td>Yes (<code>Sec-</code> prefix)</td>
    </tr>
  </tbody>
</table></figure></div><section aria-labelledby="syntax"><h2 id="syntax"><a href="#syntax">Syntax</a></h2><div class="section-content"><div class="code-example"><div class="example-header"><span class="language-name">http</span></div><pre class="brush: http notranslate"><code>Sec-Speculation-Tags: &lt;tag-list&gt;
</code></pre></div></div></section><section aria-labelledby="directives"><h2 id="directives"><a href="#directives">Directives</a></h2><div class="section-content"><dl>
<dt id="tag-list"><a href="#tag-list"><code>&lt;tag-list&gt;</code></a></dt>
<dd>
<p>A comma-separated list of tags indicating <a href="https://developer.mozilla.org/en-US/docs/Web/API/Speculation_Rules_API">Speculation Rules API</a> rules that may have initiated this request. See <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Reference/Elements/script/type/speculationrules#speculation_rules_json_representation">Speculation rules JSON representation</a> for the syntax reference.</p>
</dd>
</dl></div></section><section aria-labelledby="examples"><h2 id="examples"><a href="#examples">Examples</a></h2><div class="section-content"></div></section><section aria-labelledby="speculation_from_a_rule_with_no_explicit_tag"><h3 id="speculation_from_a_rule_with_no_explicit_tag"><a href="#speculation_from_a_rule_with_no_explicit_tag">Speculation from a rule with no explicit tag</a></h3><div class="section-content"><div class="code-example"><div class="example-header"><span class="language-name">html</span></div><pre class="brush: html notranslate"><code>&lt;script type="speculationrules"&gt;
  {
    "prefetch": [
      {
        "urls": ["next.html", "next2.html"]
      }
    ]
  }
&lt;/script&gt;
</code></pre></div>
<p>If a speculation happens due to a speculation rule with no tag, then <code>null</code> is sent in the <code>Sec-Speculation-Tags</code> header.</p>
<div class="code-example"><div class="example-header"><span class="language-name">http</span></div><pre class="brush: http notranslate"><code>Sec-Speculation-Tags: null
</code></pre></div></div></section><section aria-labelledby="speculation_from_a_rule_with_a_tag"><h3 id="speculation_from_a_rule_with_a_tag"><a href="#speculation_from_a_rule_with_a_tag">Speculation from a rule with a tag</a></h3><div class="section-content"><div class="code-example"><div class="example-header"><span class="language-name">html</span></div><pre class="brush: html notranslate"><code>&lt;script type="speculationrules"&gt;
  {
    "prefetch": [
      {
        "tag": "my-rule",
        "urls": ["next.html", "next2.html"]
      }
    ]
  }
&lt;/script&gt;
</code></pre></div>
<p>If a speculation happens due to a speculation rule with a tag, the tag name is sent in the <code>Sec-Speculation-Tags</code> header.</p>
<div class="code-example"><div class="example-header"><span class="language-name">http</span></div><pre class="brush: http notranslate"><code>Sec-Speculation-Tags: "my-rule"
</code></pre></div></div></section><section aria-labelledby="speculation_from_a_rule_with_multiple_tags"><h3 id="speculation_from_a_rule_with_multiple_tags"><a href="#speculation_from_a_rule_with_multiple_tags">Speculation from a rule with multiple tags</a></h3><div class="section-content"><p>The <code>tag</code> can be set at multiple levels:</p>
<div class="code-example"><div class="example-header"><span class="language-name">html</span></div><pre class="brush: html notranslate"><code>&lt;script type="speculationrules"&gt;
  {
    "tag": "my-ruleset",
    "prefetch": [
      {
        "tag": "my-rule",
        "urls": ["next.html", "next2.html"]
      }
    ]
  }
&lt;/script&gt;
</code></pre></div>
<p>All matching tags are sent in the <code>Sec-Speculation-Tags</code> header, so in this case, both <code>"my-ruleset"</code> and <code>"my-rule"</code> would be sent:</p>
<div class="code-example"><div class="example-header"><span class="language-name">http</span></div><pre class="brush: http notranslate"><code>Sec-Speculation-Tags: "my-ruleset", "my-rule"
</code></pre></div></div></section><section aria-labelledby="speculation_from_multiple_rules"><h3 id="speculation_from_multiple_rules"><a href="#speculation_from_multiple_rules">Speculation from multiple rules</a></h3><div class="section-content"><div class="code-example"><div class="example-header"><span class="language-name">html</span></div><pre class="brush: html notranslate"><code>&lt;script type="speculationrules"&gt;
  {
    "prefetch": [
      {
        "tag": "my-rule",
        "urls": ["next.html", "next2.html"],
        "eagerness": "moderate"
      }
    ]
  }
&lt;/script&gt;
&lt;script type="speculationrules"&gt;
  {
    "prefetch": [
      {
        "tag": "cdn-rule",
        "urls": ["next.html", "next.html"],
        "eagerness": "conservative"
      }
    ]
  }
&lt;/script&gt;
</code></pre></div>
<p>In this example, if the speculation is initiated by the user hovering over the link for 200 milliseconds (<code>"eagerness": "moderate"</code>), then only the <code>my-rule</code> tag will be sent in the header:</p>
<div class="code-example"><div class="example-header"><span class="language-name">http</span></div><pre class="brush: http notranslate"><code>Sec-Speculation-Tags: "my-rule"
</code></pre></div>
<p>However, if the link is clicked immediately, without waiting for the 200 millisecond hover, then both rules would have triggered a speculation, therefore both tags will be included in the header:</p>
<div class="code-example"><div class="example-header"><span class="language-name">http</span></div><pre class="brush: http notranslate"><code>Sec-Speculation-Tags: "my-rule", "cdn-rule"
</code></pre></div></div></section><section aria-labelledby="speculation_from_multiple_rules_with_and_without_tags"><h3 id="speculation_from_multiple_rules_with_and_without_tags"><a href="#speculation_from_multiple_rules_with_and_without_tags">Speculation from multiple rules with and without tags</a></h3><div class="section-content"><div class="code-example"><div class="example-header"><span class="language-name">html</span></div><pre class="brush: html notranslate"><code>&lt;script type="speculationrules"&gt;
  {
    "prefetch": [
      {
        "urls": ["next.html", "next2.html"],
        "eagerness": "moderate"
      }
    ]
  }
&lt;/script&gt;
&lt;script type="speculationrules"&gt;
  {
    "prefetch": [
      {
        "tag": "cdn-rule",
        "urls": ["next.html", "next.html"],
        "eagerness": "conservative"
      }
    ]
  }
&lt;/script&gt;
</code></pre></div>
<p>Similar to the previous example, if the link is clicked immediately without waiting for the 200 millisecond hover, both rules would have triggered a speculation, therefore both tags will be included in the header. However, because the first rule does not include a <code>tag</code> field, it is represented in the header with a <code>null</code> value:</p>
<div class="code-example"><div class="example-header"><span class="language-name">http</span></div><pre class="brush: http notranslate"><code>Sec-Speculation-Tags: null, "cdn-rule"
</code></pre></div></div></section><h2 id="specifications"><a href="#specifications">Specifications</a></h2><table class="standard-table"><thead><tr><th scope="col">Specification</th></tr></thead><tbody><tr><td><a href="https://wicg.github.io/nav-speculation/prefetch.html#sec-speculation-tags-header">Prefetch<!-- --> <br><small># <!-- -->sec-speculation-tags-header</small></a></td></tr></tbody></table><!--$--><h2 id="browser_compatibility"><a href="#browser_compatibility">Browser compatibility</a></h2><lazy-compat-table></lazy-compat-table><!--/$--><section aria-labelledby="see_also"><h2 id="see_also"><a href="#see_also">See also</a></h2><div class="section-content"><ul>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Speculation_Rules_API">Speculation Rules API</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Reference/Elements/script/type/speculationrules"><code>&lt;script type="speculationrules"&gt;</code></a></li>
</ul></div></section></article></main></div></div></div></body></html>